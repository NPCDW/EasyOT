<template>
  <div data-tauri-drag-region class="titlebar">
    <div class="titlebar-info">
      <img src="/tauri.svg" alt="tauri app" style="height: 60%; margin-left: 60px">
      <span class="pl-2">EasyOT</span>
    </div>
    <div class="titlebar-button-group">
      <div class="titlebar-button" @click="toggleAlwaysOnTop">
        <el-icon v-if="alwaysOnTop"><svg t="1681808177764" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="67659" width="200" height="200"><path d="M734.646857 0H287.158857c-59.245714 1.024-112.274286 33.060571-112.274286 83.968 0 28.452571 14.116571 48.566857 45.348572 74.532571l4.754286 3.876572 14.628571 11.849143 4.900571 3.949714 4.754286 4.022857 4.754286 4.096c7.460571 6.582857 13.897143 12.873143 19.456 19.309714 4.169143 4.827429 8.265143 10.971429 11.922286 18.285715l1.828571 3.657143 1.609143 3.657142 1.024 2.413715 0.512 1.243428 1.536 4.169143 1.389714 3.949714 0.731429 2.048 1.316571 4.534858 1.170286 4.388571 1.609143 6.656 0.950857 4.900571 0.438857 2.267429 0.731429 4.900571c8.777143 59.538286-10.24 119.076571-58.733715 159.670858l-5.632 4.608-5.412571 4.388571-5.339429 4.096-2.56 2.048-5.266285 3.949714-7.753143 5.632-4.973715 3.657143-4.973714 3.510857-7.314286 5.12-25.234285 17.115429-4.388572 2.998857-4.315428 2.998857-4.169143 3.072-4.096 2.925714-4.022857 3.072-1.974857 1.609143-3.876572 3.072c-39.936 32.914286-53.76 68.754286-47.250286 134.070857l1.389715 13.897143h313.563428l74.020572 350.866286c2.048 9.508571 11.410286 16.969143 23.552 18.578286l1.609143 0.219428c15.067429 1.316571 29.037714-6.729143 31.670857-18.651428L615.862857 654.189714h313.709714l1.755429-17.554285 0.512-7.241143c4.169143-61.44-11.702857-95.085714-53.906286-127.707429l-3.876571-2.998857-4.169143-3.072-6.290286-4.461714-6.582857-4.608-25.526857-17.334857-9.801143-6.875429-4.973714-3.510857-5.12-3.657143-5.12-3.803429-7.826286-5.924571-5.412571-4.315429-5.412572-4.388571-5.485714-4.461714c-44.909714-37.595429-64.585143-91.282286-60.123429-147.309715l0.512-5.193142c0.585143-5.558857 1.462857-11.264 2.56-16.822858l1.097143-4.754285 2.194286-8.777143 1.462857-4.534857c2.121143-6.802286 4.681143-13.312 7.606857-19.309715l1.828572-3.657142a106.057143 106.057143 0 0 1 3.510857-6.070858l1.974857-3.072c1.682286-2.56 3.584-4.973714 5.485714-7.168 5.558857-6.436571 11.995429-12.726857 19.602286-19.456l4.754286-4.096 4.754285-4.022857 4.827429-3.876571 12.068571-9.728 4.754286-3.949714 4.827429-3.949715c29.330286-24.795429 43.008-44.909714 43.008-72.557714C849.188571 32.256 794.331429 0 734.646857 0z m0 54.857143c18.578286 0 36.790857 4.388571 49.737143 13.897143 5.12 3.657143 9.874286 8.338286 9.874286 15.213714 0 12.946286-10.898286 20.041143-23.113143 30.281143l-21.796572 17.700571c-23.771429 20.260571-32.036571 28.452571-38.326857 35.474286l-1.974857 2.194286c-25.819429 41.179429-28.525714 49.883429-31.305143 58.660571-7.241143 29.110857-8.557714 37.449143-9.289143 43.812572l-0.219428 1.828571c-6.656 81.993143 20.626286 151.917714 79.579428 200.923429l25.819429 20.406857 26.624 19.017143 24.868571 16.822857c30.72 23.405714 46.08 41.325714 50.834286 66.267428l0.292572 1.974857H571.830857l-60.928 277.211429-58.514286-277.211429H147.017143l0.512-3.510857a69.924571 69.924571 0 0 1 23.186286-43.446857l2.925714-2.633143 50.395428-35.84 26.477715-18.870857C345.380571 417.865143 365.714286 340.333714 354.523429 264.630857c-24.137143-75.337143-32.694857-87.04-38.107429-93.330286l-0.731429-0.877714a259.803429 259.803429 0 0 0-26.112-25.965714l-29.622857-24.283429c-16.530286-13.824-30.208-21.284571-30.208-36.205714 0-6.656 4.534857-11.337143 9.435429-14.994286 12.507429-9.362286 30.208-13.750857 48.493714-14.116571h446.902857z" fill="#ffffff" p-id="67660"></path></svg></el-icon>
        <el-icon v-else><svg t="1681807155719" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19779" width="200" height="200"><path d="M51.197143 1024c-13.021992 0-26.0184-5.091113-36.021541-15.094254-18.113104-18.164271-20.262117-46.050265-5.091113-66.337966l213.059228-288.325828-166.983379-166.983379C39.863661 470.961896 36.640143 445.48075 48.30621 425.2698c7.982046-12.612656 76.699275-112.82315 229.483822-75.010766 2.532765 0.307002 5.270197 0.537253 8.212297 0.793088 6.267953 0.537253 13.277827 1.17684 20.87612 2.404847 32.33752 5.244614 89.516599-20.722619 139.148552-63.037697 47.559691-40.49865 78.285451-87.751339 78.285451-120.344693 0-7.57271-0.179084-15.631507-0.358169-23.536802-1.279174-30.623426-3.223519-77.697031 31.979351-112.874317 41.649907-41.701074 107.552953-45.05251 153.270633-7.854129 0.921005 0.741921 1.76526 1.535009 2.583932 2.379264l-0.025583 0c24.585725 24.048472 276.608594 275.815506 279.243692 278.476188 21.694792 21.694792 33.642277 50.527374 33.693444 81.176384 0.025583 30.674593-11.896319 59.456009-33.539943 81.099634-35.023785 35.049369-82.353225 33.053857-113.565071 31.723516-7.393626-0.153501-15.478006-0.332585-23.025133-0.332585-30.828094 0-67.69389 21.592458-103.715431 60.760767-50.808793 55.260318-82.09739 126.63823-79.411124 158.617581 1.125673 10.258976 3.223519 28.37208 3.607271 30.930428 36.891379 149.612195-63.114447 217.843339-74.627013 225.109047-20.697036 12.484739-46.357267 9.389137-63.012113-7.240125l-178.393611-178.393611c-10.003141-10.003141-10.003141-26.171901 0-36.175042s26.171901-10.003141 36.175042 0l178.393611 178.393611c7.854129-5.091113 80.101878-54.646315 51.320462-171.76749-0.51167-2.35368-3.044434-23.562386-4.374775-35.970374-4.298025-51.115795 35.586622-136.027367 92.688951-198.118475 32.439854-35.254036 83.27423-77.287695 141.348731-77.287695 7.905296 0 16.399011 0.179084 24.662475 0.358169 32.41427 1.355924 58.048918 0.972172 75.77827-16.782763 11.973069-11.973069 18.548024-27.885994 18.548024-44.847842-0.025583-17.013015-6.677288-33.00269-18.701524-45.05251C952.221752 340.23031 683.851039 72.243349 675.945743 64.645055c-24.278723-19.724864-60.7096-17.882853-83.785899 5.21903-17.908437 17.908437-18.317772 43.491917-17.013015 75.087516 0.204668 8.800717 0.383752 17.243266 0.383752 25.148562 0 48.378362-35.995957 107.936705-96.270638 159.282751-49.478452 42.135993-122.979792 83.811483-180.491457 74.60143-6.293536-1.023339-12.049819-1.509425-17.192099-1.944345-3.325852-0.281418-6.421454-0.562837-9.312387-0.921005-2.456014-0.07675-4.860861-0.537253-7.188958-1.304758-117.760762-29.037251-167.597382 43.44075-172.893163 51.806549l182.742803 182.026466c8.954218 8.954218 10.028724 23.101883 2.481598 33.309692L51.17156 973.114457l238.617125-174.530506c11.435816-8.365798 27.425491-5.80745 35.740123 5.602782s5.80745 27.399908-5.602782 35.714539l-238.821793 174.12117C72.150014 1020.699731 61.68637 1024 51.197143 1024z" fill="#ffffff" p-id="19780"></path></svg></el-icon>
      </div>
      <div class="titlebar-button" @click="minimize">
        <el-icon><svg t="1681889490352" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3836" width="200" height="200"><path d="M923 571H130.7c-27.6 0-50-22.4-50-50s22.4-50 50-50H923c27.6 0 50 22.4 50 50s-22.4 50-50 50z" fill="" p-id="3837"></path></svg></el-icon>
      </div>
      <div class="titlebar-button" @click="toggleMaximize">
        <el-icon v-if="maximize"><svg t="1681894720354" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7566" width="200" height="200"><path d="M960 0H294.058667c-35.271111 0-64 28.672-64 64v128H64C28.672 192 0 220.672 0 256v704C0 995.328 28.672 1024 64 1024H768c35.328 0 64-28.672 64-64v-167.025778h128c35.328 0 64-28.672 64-64V64C1024 28.672 995.328 0 960 0zM768 728.974222v231.025778H64V256H768v472.974222z m189.44 0h-125.44V256c0-35.328-28.672-64-64-64H294.115556v-128h665.884444l-2.56 664.974222z" fill="#FFFFFF" p-id="7567"></path></svg></el-icon>
        <el-icon v-else><svg t="1681894364810" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3589" width="200" height="200"><path d="M926 958H100.1c-17.7 0-32-14.4-32-32V100.1c0-17.7 14.4-32 32-32H926c17.7 0 32 14.4 32 32V926c0 17.6-14.4 32-32 32z m-797.9-60H898V128.1H128.1V898z" p-id="3590"></path></svg></el-icon>
      </div>
      <div class="titlebar-button titlebar-close-button" @click="close">
        <el-icon><i-ep-Close /></el-icon>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { appWindow } from '@tauri-apps/api/window'
import { ref } from 'vue';

async function minimize() {
  await appWindow.minimize()
}
const maximize = ref(false)
appWindow.isMaximized().then(res => {
  maximize.value = res
})
async function toggleMaximize() {
  maximize.value = !maximize.value
  await appWindow.toggleMaximize()
}
async function close() {
  await appWindow.close()
}
const alwaysOnTop = ref(false)
async function toggleAlwaysOnTop() {
  alwaysOnTop.value = !alwaysOnTop.value
  appWindow.setAlwaysOnTop(alwaysOnTop.value)
}
</script>

<style scoped>
.titlebar {
  height: var(--title-bar-height);
  background: var(--dark-background-color);
  user-select: none;
  display: flex;
  justify-content: space-between;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  cursor: move;
}

.titlebar-info {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: var(--title-bar-height);
  height: var(--title-bar-height);
}

.titlebar-button {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: var(--title-bar-height);
  height: var(--title-bar-height);
  cursor: default;
}

.titlebar-button:hover {
  background: #5bbec3;
}

.titlebar-close-button:hover {
  background: red;
}</style>